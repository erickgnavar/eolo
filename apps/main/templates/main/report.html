{% extends 'main/base.html' %}
{% load common_tags %}
{% load i18n %}
{% block extrastyle %}
    <style type="text/css">
        .sub-index {
            vertical-align: sub;
        }
        #chart-container {
            width: 100%;
        }
        #chart-statistics {
            height: 500px;
            width: 900px;
        }
    </style>
{% endblock extrastyle %}
{% block container %}
    <div class="page-header">
        <h1>{% trans 'Found' %} {{ data.length }} {% trans 'measurements' %} | {{ variable.name }}</h1>
    </div>
    <div>
        <ul class="nav nav-tabs" id="myTab">
            <li class="active">
                <a href="#frequency_table" data-toggle="tab">{% trans 'Frequency Table' %}</a>
            </li>
            <li>
                <a href="#charts" data-toggle="tab">{% trans 'Charts' %}</a>
            </li>
            <li>
                <a href="#statistics" data-toggle="tab">{% trans 'Statistics' %}</a>
            </li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane active" id="frequency_table">
                <h3>{% trans 'Real Values' %}</h3>
                <table class="table table-bordered table-striped table-hover">
                    <thead>
                        <tr>
                            <th>{% trans "#" %}</th>
                            <th>{% trans 'Interval' %}</th>
                            <th>{% trans 'Pipes' %}</th>
                            <th>{% trans 'Class Marker' %}</th>
                            <th>f<span class="sub-index">i</span></th>
                            <th>F<span class="sub-index">i</span></th>
                            <th>h<span class="sub-index">i</span></th>
                            <th>H<span class="sub-index">i</span></th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for interval in real_data.intervals %}
                        <tr>
                            <td>{{ interval.index }}</td>
                            {% if interval.index == 1 %}
                                <td>[{{ interval.min }} : {{ interval.max }}]</td>    
                            {% else %}
                                <td>&lt;{{ interval.min }} : {{ interval.max }}]</td>
                            {% endif %}
                            <td>
                            {{ interval.values|to_pipes }}
                            </td>
                            <td>{{ interval.class_marker|stringformat:'f' }}</td>
                            <td>{{ interval.fi}}</td>
                            <td>{{ interval.Fi }}</td>
                            <td>{{ interval.hi }}</td>
                            <td>{{ interval.Hi }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
                <hr>
                <h3>{% trans 'Simulate Values' %}</h3>
                <table class="table table-bordered table-striped table-hover">
                    <thead>
                        <tr>
                            <th>{% trans "#" %}</th>
                            <th>{% trans 'Interval' %}</th>
                            <th>{% trans 'Pipes' %}</th>
                            <th>{% trans 'Class Marker' %}</th>
                            <th>f<span class="sub-index">i</span></th>
                            <th>F<span class="sub-index">i</span></th>
                            <th>h<span class="sub-index">i</span></th>
                            <th>H<span class="sub-index">i</span></th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for interval in simulate_data.intervals %}
                        <tr>
                            <td>{{ interval.index }}</td>
                            {% if interval.index == 1 %}
                                <td>[{{ interval.min }} : {{ interval.max }}]</td>    
                            {% else %}
                                <td>&lt;{{ interval.min }} : {{ interval.max }}]</td>
                            {% endif %}
                            <td>
                            {{ interval.values|to_pipes }}
                            </td>
                            <td>{{ interval.class_marker|stringformat:'f' }}</td>
                            <td>{{ interval.fi}}</td>
                            <td>{{ interval.Fi }}</td>
                            <td>{{ interval.hi }}</td>
                            <td>{{ interval.Hi }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            <div id="charts" class="tab-pane">
                <div id="chart-container">
                    <div id="chart-statistics"></div>
                </div>
            </div>
            <div id="statistics" class="tab-pane">
                <p>{% trans 'Average' %} {{ data.average }}</p>
                <p>{% trans 'Median' %} {{ data.median }}</p>
                <p>{% trans 'Mode' %} {{ data.mode }}</p>
            </div>
        </div>
    </div>
    <!--
    <table class="table table-bordered table-striped table-hover">
        <thead>
            <tr>
                <th>{% trans 'Station' %}</th>
                <th>{% trans 'Value' %}</th>
                <th>{% trans 'Date' %}</th>
            </tr>
        </thead>
        <tbody>
            {% for measurement in measurements %}
            <tr>
                <td>{{ measurement.station }}</td>
                <td>{{ measurement.value }}</td>
                <td>{{ measurement.date }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
-->
{% endblock container %}
{% block bottom_script %}
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
        google.load("visualization", "1", {packages:["corechart"]});
        google.setOnLoadCallback(drawChart);
        function drawChart() {
            var data = google.visualization.arrayToDataTable([
                ['Statistics', 'Real', 'Simulated'],
                ['Average',  {{ real_data.average }}, {{ simulate_data.average }}],
                ['Median', {{ real_data.median }}, {{ simulate_data.median }}],
                ['Mode',  {{ real_data.mode }}, {{ simulate_data.mode }}],
            ]);

            var options = {
                title: '',
                hAxis: {title: 'Stadistics', titleTextStyle: {color: 'red'}}
            };

            var chart = new google.visualization.ColumnChart(document.getElementById('chart-statistics'));
            chart.draw(data, options);
        }
    </script>
{% endblock bottom_script %}